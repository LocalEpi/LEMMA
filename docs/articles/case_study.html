<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Case Study • LEMMA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Case Study">
<meta property="og:description" content="LEMMA">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">LEMMA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0.9011</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/case_study.html">Case Study</a>
    </li>
    <li>
      <a href="../articles/faq.html">FAQ</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/LocalEpi/LEMMA/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="case_study_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Case Study</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/LocalEpi/LEMMA/blob/master/vignettes/case_study.Rmd"><code>vignettes/case_study.Rmd</code></a></small>
      <div class="hidden name"><code>case_study.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">LEMMA</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">data.table</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)</pre></body></html></div>
<p>In this Case Studies we show how to use LEMMA to model COVID-19 hospitalizations in Alameda County. In previous versions of LEMMA, fitting Alameda County required substantial user intervention. In the current version, minimal user intervention is required.</p>
<ol style="list-style-type: decimal">
<li><p>Set up an Excel input file Open the template Excel file (the original is <code><a href="https://rdrr.io/r/base/system.file.html">system.file("extdata", "template.xlsx", package = "LEMMA")</a></code> but the installation instructions on GitHub suggest copying it to example.xlsx in your local directory). In Excel, Save As as “Alameda.xlsx”.</p></li>
<li><p>Get raw data from<br><a href="https://data.ca.gov/dataset/529ac907-6ba1-4cb7-9aae-8966fc96aeef/resource/42d33765-20fd-44b8-a978-b083b7542225/download/hospitals_by_county.csv" class="uri">https://data.ca.gov/dataset/529ac907-6ba1-4cb7-9aae-8966fc96aeef/resource/42d33765-20fd-44b8-a978-b083b7542225/download/hospitals_by_county.csv</a></p></li>
</ol>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">dt</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fread.html">fread</a></span>(<span class="st">"hospitals_by_county_June30.csv"</span>)
<span class="no">dt</span> <span class="kw">&lt;-</span> <span class="no">dt</span>[<span class="no">county</span> <span class="kw">==</span> <span class="st">"Alameda"</span>]</pre></body></html></div>
<ol start="3" style="list-style-type: decimal">
<li>Write the data</li>
</ol>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span>(<span class="no">dt</span>[, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>:<span class="fl">4</span>, <span class="fl">7</span>:<span class="fl">8</span>)], <span class="kw">sep</span> <span class="kw">=</span> <span class="st">","</span>, <span class="kw">row.names</span> <span class="kw">=</span> <span class="no">F</span>)</pre></body></html></div>
<pre><code>#&gt; "todays_date","hospitalized_covid_confirmed_patients","hospitalized_suspected_covid_patients","icu_covid_confirmed_patients","icu_suspected_covid_patients"
#&gt; "3/29/20",36,91,20,16
#&gt; "3/30/20",59,89,27,18
#&gt; "3/31/20",56,94,27,17
#&gt; "4/1/20",52,76,27,15
#&gt; ...</code></pre>
<p>Copy and paste the observed data to the Data tab in Alameda.xlsx.</p>
<ol start="4" style="list-style-type: decimal">
<li><p>Choose your prior distributions in the Parameters with Distributions sheet. The existing priors are fine for Alameda but they could be adjusted for a different county. For example, in a significantly older population, the hospitalization rate could be higher.</p></li>
<li><p>Choose your interventions in the Interventions sheet. Note that if automatic.interventions (on Internal sheet) is true (the default), interventions with mean 1 and sd 0.3 are added whenever there are no interventions for 14 days.</p></li>
</ol>
<p>We may want to give the model additional ability to adapt to possible changes in transmission. To account for the possibility that increased mobility, decreased social distancing, etc increased transmission, add a intervention with mean 1 and standard deviation 0.5 on June 1. A mean of 1 indicates that our prior is no change, but the large standard deviation allows for possibility of significant change. The standard deviation of 4 days on the intervention date allows for flexibility on the date of change. Add the following row:<br>
Intervention Date mean = “6/1/2020” standard deviation = 4<br>
Re Multiplier mean = 1, standard deviation = 0.5 Days to Reach New Re mean = 7, standard deviation = 2</p>
<p>Future changes in public health interventions (for example, relaxing/replacing current Shelter In Place ordinances) can be modelled as a future intervention which multiplies Re by a factor greater than 1. As an example, suppose we want to consider the effect of a third intervention which multiplies Re by 1.4 on July 15. Add the following row:<br>
Intervention Date mean = “7/15/2020” standard deviation = 0<br>
Re Multiplier mean = 1.4, standard deviation = 0<br>
Days to Reach New Re mean = 7, standard deviation = 0</p>
<ol start="6" style="list-style-type: decimal">
<li>Run CredibilityIntervalFromExcel</li>
</ol>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">result</span> <span class="kw">&lt;-</span> <span class="kw pkg">LEMMA</span><span class="kw ns">::</span><span class="fu"><a href="../reference/CredibilityIntervalFromExcel.html">CredibilityIntervalFromExcel</a></span>(<span class="st">"Alameda.xlsx"</span>)</pre></body></html></div>
<p><img src="case_study_files/figure-html/unnamed-chunk-7-1.png" width="700"><img src="case_study_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<ol start="7" style="list-style-type: decimal">
<li>In this case there are several warnings. These can be eliminated by changing max_treedepth to 15 and adapt_delta to 0.99 on the Internals sheet, which increases run time. In this example, the results are not significantly different from those using the defaults, but this is not guaranteed in general. See the FAQ for more details on such warnings.</li>
</ol>
</div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Joshua Schwab.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
