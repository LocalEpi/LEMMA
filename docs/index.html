<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Local Epidemic Modeling for Management &amp; Action  • LEMMA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Local Epidemic Modeling for Management &amp; Action ">
<meta property="og:description" content="LEMMA projects hospital utilization from COVID-19.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">LEMMA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/case_study.html">Case Study</a>
    </li>
    <li>
      <a href="articles/faq.html">FAQ</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/LocalEpi/LEMMA/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="lemma" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#lemma" class="anchor"></a>LEMMA</h1></div>
<p>LEMMA (Local Epidemic Modeling for Management &amp; Action) is designed to provide regional (e.g. city or county-level) projections of the SARS-CoV-2 (COVID-19) epidemic under various scenarios. Daily projections with uncertainty bounds are made for hospitalizations, ICU use, ventilator use, active cases, and total cases. As detailed below, LEMMA allows for a range of user-specified parameterizations (including on the model structure) and is fit using case series data of COVID-19 hospitalizations.</p>
<div id="contributors" class="section level2">
<h2 class="hasAnchor">
<a href="#contributors" class="anchor"></a>Contributors</h2>
<p>LEMMA is a collaborative effort between experts in Medicine, Public Health, and Data Science, including but not limited to</p>
<ul>
<li>Joshua Schwab - UC Berkeley</li>
<li>Laura B. Balzer - UMass Amherst</li>
<li>Elvin Geng - Washington University</li>
<li>James Peng - UC San Francisco</li>
<li>Maya L. Petersen - UC Berkeley</li>
</ul>
<p>We have moved our model fitting from R to Stan. Our Stan implementation is based on the “Santa Cruz County COVID-19 Model” (<a href="https://github.com/jpmattern/seir-covid19" class="uri">https://github.com/jpmattern/seir-covid19</a>) by Jann Paul Mattern (UC Santa Cruz) and Mikala Caton (Santa Cruz County Health Services Agency). We are very grateful to Paul and Mikala for generously sharing their code and helping us.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<ol>
<li>Install RStudio. (<a href="https://rstudio.com/products/rstudio/download/#download" class="uri">https://rstudio.com/products/rstudio/download/#download</a>)</li>
<li>Create a folder to store your LEMMA inputs and outputs. For example, create a folder “MyFolder” within Documents.</li>
<li>
<p>For this step there are several choices, depending on your local machine.</p>
<p><strong>Installing From Source (available for all platforms, but requires a C/C++ compiler)</strong></p>
<p>If you do not have a toolchain including a C/C++ compiler, see here for installing one:</p>
<p><a href="https://support.rstudio.com/hc/en-us/articles/200486498" class="uri">https://support.rstudio.com/hc/en-us/articles/200486498</a></p>
<pre class="{r}"><code>install.packages("remotes")  #if you do not already have the remotes package
remotes::install_github("LocalEpi/LEMMA")`</code></pre>
<p><strong>Installing From Binary (for MacOS using R 3.6)</strong></p>
<pre class="{r}"><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("https://github.com/joshuaschwab/LEMMAstan/blob/master/LEMMA_MacOS_R-3-6-3.tgz?raw=true", repos = NULL, type = "binary")</a></code></pre>
<p><strong>Installing From Binary (for Windows using R 3.6)</strong></p>
<pre class="{r}"><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("https://github.com/joshuaschwab/LEMMAstan/blob/master/LEMMA_Win_R-3-6-3.zip?raw=true", repos = NULL, type = "binary")</a></code></pre>
<p><strong>Installing From Binary (for Windows using R 4.0)</strong></p>
<pre class="{r}"><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("https://github.com/joshuaschwab/LEMMAstan/blob/master/LEMMA_Win_R-4-0.zip?raw=true", repos = NULL, type = "binary")</a></code></pre>
</li>
<li><p>Copy and paste these lines into the RStudio console:</p></li>
</ol>
<pre class="{r}"><code><a href="https://rdrr.io/r/base/getwd.html">setwd("~/Documents/MyFolder")   # replace "~/Documents/MyFolder" with the path/folder you created
file.copy(system.file("extdata", "template.xlsx", package = "LEMMA", mustWork = TRUE), "example.xlsx")</a></code></pre>
<p>LEMMA is in early development and is changing rapidly. Please restart RStudio and repeat step 3 once per day.</p>
<p>If you get an error something like “lazy-load database ‘Library/R/3.6/library/LEMMA/R/LEMMA.rdb’ is corrupt” restart R and try step 3 again.</p>
</div>
<div id="running-lemma" class="section level2">
<h2 class="hasAnchor">
<a href="#running-lemma" class="anchor"></a>Running LEMMA</h2>
<ol>
<li>Edit the Excel file ~/Documents/MyFolder/example.xlsx and save under a new name. For example, “MyCity.xlsx”</li>
<li>Run the following code.</li>
</ol>
<pre class="{r}"><code><a href="reference/CredibilityIntervalFromExcel.html">LEMMA::CredibilityIntervalFromExcel("MyCity.xlsx")</a></code></pre>
</div>
<div id="additional-documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-documentation" class="anchor"></a>Additional Documentation</h2>
<p>(work in progress)</p>
<p><a href="https://localepi.github.io/LEMMA/articles/case-studies.html" class="uri">https://localepi.github.io/LEMMA/articles/case-studies.html</a></p>
<p><a href="https://localepi.github.io/LEMMA/articles/faq.html" class="uri">https://localepi.github.io/LEMMA/articles/faq.html</a></p>
</div>
<div id="input" class="section level2">
<h2 class="hasAnchor">
<a href="#input" class="anchor"></a>Input</h2>
<p>The provided spreadsheet provides a template and example of the inputs needed to run LEMMA. These are inputted in four tabs.</p>
<div id="sheet-1-parameters-with-distributions" class="section level3">
<h3 class="hasAnchor">
<a href="#sheet-1-parameters-with-distributions" class="anchor"></a>Sheet 1: Parameters with Distributions</h3>
<p>Briefly, LEMMA requires parameters related to the epidemic modeling (e.g., basic reproductive number, duration of infectiousness, percent of infected persons who are hospitalized). LEMMA also allows the user to specify the timing and impact of public health interventions, such as school closures and shelter-in-place orders. Interventions may occur before the current date to reflect such public health interventions. Interventions may also occur after the current date and can be used to simulate epidemic if measures are implemented or lifted at a future date. Explanations for specific parameters are provided below. Users can input a mean and standard deviation for each parameter. Each parameter will be drawn from a normal distribution.</p>
<ul>
<li>Basic reproductive number R0 before Intervention1: This should represent initial epidemic growth before any public health interventions were implemented.</li>
</ul>
</div>
<div id="sheet-2-interventions" class="section level3">
<h3 class="hasAnchor">
<a href="#sheet-2-interventions" class="anchor"></a>Sheet 2: Interventions</h3>
<ul>
<li><p>Intervention Date: Specify the date of the public health intervention. You can set standard deviation to zero to indicate that the intervention definitely starts on a certain day, or set standard deviation to a positive number to indicate there is some uncertainty about when the intervention took/takes effect. Intervention Date can be in the past or in the future.</p></li>
<li><p>Re Multiplier: Specify the impact of the first intervention in terms of multiplicative reductions in the basic reproductive number. Suppose this is 60%. Then the effective reproductive number after the first intervention would be <span class="math inline"><em>R</em><em>e</em> = 0.6 * <em>R</em>0</span>, where R0 is the basic reproductive number provided on the Parameters with Distributions sheet. If Re Multiplier for the second intervention is 50%, the effective reproductive number after the second intervention would be <span class="math inline"><em>R</em><em>e</em> = 0.5 * 0.6 * <em>R</em>0</span>.</p></li>
<li><p>Days to reach new Re: LEMMA assumes the effects of interventions do not happen instantaneously. Therefore, specify the number of days to reach the new effective reproductive number.</p></li>
</ul>
</div>
<div id="sheet-3-model-inputs" class="section level3">
<h3 class="hasAnchor">
<a href="#sheet-3-model-inputs" class="anchor"></a>Sheet 3: Model Inputs</h3>
<p>Specify the number of people in the area of interest; this could be a region, city, or hospital catchement area. Specify the starting and final date of projections.</p>
</div>
<div id="sheet-4-data" class="section level3">
<h3 class="hasAnchor">
<a href="#sheet-4-data" class="anchor"></a>Sheet 4: Data</h3>
<p>Provide hospital, ICU and/or death case series data. PUI (Persons Under Investigation, or “Probable” cases) can be entered if available. Any entries (either an entire column or specific rows) can be left blank if the data is not available.</p>
<ul>
<li>Hospitalizations: Number of patients with COVID19 hospitalized on a given day, <em>including</em> those in ICU.</li>
<li>ICU: Number of patients in ICU with COVID19 on a given day</li>
<li>Cumulative Deaths: Total number of persons who have died due to COVID19 by a given day</li>
<li>Cumulative Hospitalizations: Total number of patients who have been hospitalized with COVID19 by a given day</li>
</ul>
</div>
<div id="sheet-5-pui-details" class="section level3">
<h3 class="hasAnchor">
<a href="#sheet-5-pui-details" class="anchor"></a>Sheet 5: PUI Details</h3>
<p>If PUIs are used on the Data sheet, a mean and standard deviation for the fraction of PUIs who are actually COVID19 positive can be entered. If PUIs are not used for a given category on the Data sheet, the mean and standard deviation for that category on the PUI Details sheet will be ignored.</p>
</div>
<div id="sheet-6-internal" class="section level3">
<h3 class="hasAnchor">
<a href="#sheet-6-internal" class="anchor"></a>Sheet 6: Internal</h3>
<p>This allows for more nuanced changes including changing the file names (output.filestr) and plotting details (plot.observed.data.long.term, plot.observed.data.short.term). Control arguments passed to Stan can also be specified (iter, cores, refresh, max_treedepth, adapt_delta). See <code><a href="https://rdrr.io/pkg/rstan/man/stan.html">?rstan::stan</a></code> for details. Note that iter is now the number of <em>posterior</em> draws (in previous versions of LEMMA, the number of prior iterations was specified.) The total number of posterior draws is 2 * iter because there are 4 chains, each with iter draws, but 50% of these are warmup draws which are not used.</p>
</div>
</div>
<div id="output" class="section level2">
<h2 class="hasAnchor">
<a href="#output" class="anchor"></a>Output</h2>
<p>Given the above input, LEMMA runs specified number of simulations, where in each simulation the parameters are sampled from the specified prior distributions. The default total number of simulations is 2000, but can be changed with iter on the Internal tab (see Sheet 6: Internal, above). The posterior distribution is provided for the model outputs: number hospitalized, number in ICU, number of deaths, cumulative number of admissions.</p>
<p>The main output is provided in pdf format. Plots include short term and long term projections of umber hospitalized, in the ICU, cumulative deaths and cumulative hospital admissions (these are only shown for categories in which data was entered on the Data sheet). A histogram of Re and a plot of Re over time are shown up to 14 days before the last observed data. It is difficult to estimate Re beyond that date because it takes at least two weeks for changes in Re to be reflected in hospitalizations. Posterior distributions for each parameter are also shown.</p>
<p>The Excel spreadsheet output provides detailed output for daily number hospitalized, in the ICU, cumulative deaths and cumulative hospital admissions.</p>
<div id="license" class="section level3">
<h3 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h3>
<p>The MIT License (MIT)</p>
<p>Copyright (c) 2020 LEMMA</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/LocalEpi/LEMMA/">https://​github.com/​LocalEpi/​LEMMA/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Joshua Schwab <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9436-1805" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Joshua Schwab.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
